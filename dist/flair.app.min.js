/**
 * @preserve
 * Flair.js
 * True Object Oriented JavaScript
 * 
 * Assembly: flair.app
 *     File: ./flair.app.js
 *  Version: 0.52.39
 *  Fri, 10 May 2019 20:48:37 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * MIT
 */
!function(t,e){"use strict";"function"==typeof!0&&(!0).amd?(!0)(e):"object"==typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),module.exports=exports=e):t["flair.app"]=e}(this,async function(t){"use strict";const e=void 0!==!0?require("flairjs"):(!0).flair,{Class:i,Struct:a,Enum:r,Interface:s,Mixin:o,Aspects:n,AppDomain:l,$$:c,attr:p,bring:f,Container:u,include:d,Port:$,on:h,post:y,telemetry:w,Reflector:v,Serializer:m,Tasks:g,as:b,is:S,isComplies:A,isDerivedFrom:O,isAbstract:I,isSealed:k,isStatic:x,isSingleton:B,isDeprecated:E,isImplements:D,isInstanceOf:M,isMixed:j,getAssembly:C,getAttr:T,getContext:P,getResource:W,getRoute:z,getType:F,ns:H,getTypeOf:L,getTypeName:R,typeOf:V,dispose:J,using:N,Args:U,Exception:q,noop:G,nip:K,nim:Q,nie:X,event:Y}=e,{TaskInfo:Z}=e.Tasks,{env:_}=e.options,{forEachAsync:tt,replaceAll:et,splitAndTrim:it,findIndexByProp:at,findItemByProp:rt,which:st,guid:ot,isArrowFunc:nt,isASyncFunc:lt,sieve:ct,b64EncodeUnicode:pt,b64DecodeUnicode:ft}=e.utils,{$$static:ut,$$abstract:dt,$$virtual:$t,$$override:ht,$$sealed:yt,$$private:wt,$$privateSet:vt,$$protected:mt,$$protectedSet:gt,$$readonly:bt,$$async:St,$$overload:At,$$enumerate:Ot,$$dispose:It,$$post:kt,$$on:xt,$$timer:Bt,$$type:Et,$$args:Dt,$$inject:Mt,$$resource:jt,$$asset:Ct,$$singleton:Tt,$$serialize:Pt,$$deprecate:Wt,$$session:zt,$$state:Ft,$$conditional:Ht,$$noserialize:Lt,$$ns:Rt}=c,Vt=_.isServer||_.isWorker?null:(!0).document,Jt=l.context.current().name,Nt=t,Ut=Nt.substr(0,Nt.lastIndexOf("/")+1);l.loadPathOf("flair.app",Ut);let qt=JSON.parse('{"host":"flair.app.ServerHost | flair.app.ClientHost","app":"flair.app.App","load":[],"container":{}}'),Gt=e.Port("settingsReader");if("function"==typeof Gt){let t=Gt("flair.app");t&&(qt=Object.assign(qt,t))}qt=Object.freeze(qt);let Kt=JSON.parse("{}");Kt=Object.freeze(Kt);let Qt=()=>{};l.context.current().currentAssemblyBeingLoaded("./flair.app{.min}.js"),await(async()=>{c("abstract"),c("ns","flair.app"),i("Bootware",function(){c("virtual"),this.construct=((t,e,i)=>{let a=U("name: string, version: string","name: string, version: string, isMountSpecific: boolean","name: string, isMountSpecific: boolean","name: string")(t,e,i);a.throwOnError(this.construct),this.info=Object.freeze({name:a.values.name||"",version:a.values.version||"",isMountSpecific:a.values.isMountSpecific||!1})}),c("virtual"),c("async"),this.boot=G,c("readonly"),this.info=null,c("virtual"),c("async"),this.ready=G,c("virtual"),this.dispose=G})})(),await(async()=>{const{IDisposable:t}=H();c("ns","flair.app"),i("Handler",[t],function(){c("virtual"),this.construct=(()=>{}),c("virtual"),this.dispose=(()=>{})})})(),await(async()=>{const{IDisposable:t}=H(),{Bootware:e}=H("flair.app");c("ns","flair.app"),i("App",e,[t],function(){c("override"),this.construct=(t=>{let e=C(this);t(e.title,e.version)}),c("override"),this.boot=(async t=>{t(),l.host().error.add(this.onError)}),c("virtual"),this.start=(async()=>{if(!_.isServer&&!_.isWorker){const{ViewState:t}=H("flair.ui");new t}}),c("virtual"),this.stop=(async()=>{if(!_.isServer&&!_.isWorker){const{ViewState:t}=H("flair.ui");(new t).clear()}}),c("virtual"),this.onError=(t=>{throw q.OperationFailed(t.error,this.onError)}),c("override"),this.dispose=(t=>{t(),l.host().error.remove(this.onError)})})})(),await(async()=>{const{IDisposable:t}=H(),{Bootware:e}=H("flair.app");c("ns","flair.app"),i("Host",e,[t],function(){c("privateSet"),this.isStarted=!1,c("virtual"),this.start=(async()=>{this.isStarted=!0}),c("virtual"),this.stop=(async()=>{this.isStarted=!1}),this.restart=(async()=>{await this.stop(),await this.start()}),this.error=Y(t=>({error:t})),this.raiseError=(t=>{this.error(t)})})})(),await(async()=>{const{Bootware:t}=H("flair.app");c("static"),c("ns","flair.app"),i("BootEngine",function(){this.start=async function(){let e=[],i=[];const a=async()=>{let a=null,r=null,s=null;for(let o of qt.load)(o=st(o))&&(a=await d(o))&&"boolean"!=typeof a&&(r=b(a,t))&&(s=new r,e.push(s),s.info.isMountSpecific&&i.push(s))},r=async t=>{if(_.isWorker){0!==i.length&&console.warn("Mount specific bootwares are not supported for worker environment. Revisit worker:flair.app->load setting.");for(let i of e)i.info.isMountSpecific||await i[t]()}else{let a=l.host().mounts,r=Object.keys(a),s="",o=null;o=a[s="main"];for(let i of e)await i[t](o);for(let e of r)if("main"!==e){o=a[e];for(let e of i)await e[t](o)}}},s=async()=>{if(!_.isWorker){let e=st(qt.host),i=b(await d(e),t),a=null;if(!i)throw q.InvalidDefinition(e,this.start);a=new i,await a.boot(),l.host(a)}await r("boot");let e=st(qt.app),i=b(await d(e),t),a=null;if(!i)throw q.InvalidDefinition(e,this.start);a=new i,await a.boot(),l.app(a)},o=async()=>{_.isWorker||await l.host().start(),await l.app().start()},n=()=>new Promise((t,e)=>{"loading"!==document.readyState?t():(!0).document.addEventListener("DOMContentLoaded",()=>{t()})}),c=()=>new Promise((t,e)=>{(!0).document.addEventListener("deviceready",()=>{t()},!1)}),p=async()=>{_.isClient&&!_.isWorker&&(await n(),_.isCordova&&await c()),_.isWorker||await l.host().ready(),await r("ready"),await l.app().ready()};await a(),await s(),await o(),await p(),console.log("ready!")}})})(),await(async()=>{const{Bootware:t}=H("flair.app");c("sealed"),c("ns","flair.boot"),i("DIContainer",t,function(){c("override"),this.construct=(t=>{t("DI Container")}),c("override"),this.boot=(async t=>{t();let e=qt.container;for(let t in e)e.hasOwnProperty(t)&&u.register(t,e[t])})})})(),l.context.current().currentAssemblyBeingLoaded(""),l.registerAdo('{"name":"flair.app","file":"./flair.app{.min}.js","mainAssembly":"flair","desc":"True Object Oriented JavaScript","title":"Flair.js","version":"0.52.39","lupdate":"Fri, 10 May 2019 20:48:37 GMT","builder":{"name":"flairBuild","version":"1","format":"fasm","formatVersion":"1","contains":["init","func","type","vars","reso","asst","rout","sreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["flair.app.Bootware","flair.app.Handler","flair.app.App","flair.app.Host","flair.app.BootEngine","flair.boot.DIContainer"],"resources":[],"assets":[],"routes":[]}')});
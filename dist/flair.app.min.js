/**
 * @preserve
 * Flair.js
 * True Object Oriented JavaScript
 * 
 * Assembly: flair.app
 *     File: ./flair.app.js
 *  Version: 0.51.64
 *  Mon, 06 May 2019 13:50:07 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * MIT
 */
!function(t,e){"use strict";"function"==typeof!0&&(!0).amd?(!0)(e):"object"==typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),module.exports=exports=e):t["flair.app"]=e}(this,async function(){"use strict";const t=void 0!==!0?require("flairjs"):(!0).flair,{Class:e,Struct:i,Enum:r,Interface:a,Mixin:s,Aspects:o,AppDomain:n,$$:l,attr:c,bring:p,Container:f,include:u,Port:d,on:$,post:h,telemetry:y,Reflector:w,Serializer:v,Tasks:m,as:g,is:b,isComplies:S,isDerivedFrom:A,isAbstract:O,isSealed:I,isStatic:k,isSingleton:x,isDeprecated:B,isImplements:E,isInstanceOf:M,isMixed:D,getAssembly:j,getAttr:C,getContext:T,getResource:P,getRoute:W,getType:z,ns:H,getTypeOf:F,getTypeName:L,typeOf:R,dispose:V,using:J,Args:N,Exception:U,noop:_,nip:q,nim:G,nie:K,event:Q}=t,{TaskInfo:X}=t.Tasks,{env:Y}=t.options,{forEachAsync:Z,replaceAll:tt,splitAndTrim:et,findIndexByProp:it,findItemByProp:rt,which:at,guid:st,isArrowFunc:ot,isASyncFunc:nt,sieve:lt,b64EncodeUnicode:ct,b64DecodeUnicode:pt}=t.utils,{$$static:ft,$$abstract:ut,$$virtual:dt,$$override:$t,$$sealed:ht,$$private:yt,$$privateSet:wt,$$protected:vt,$$protectedSet:mt,$$readonly:gt,$$async:bt,$$overload:St,$$enumerate:At,$$dispose:Ot,$$post:It,$$on:kt,$$timer:xt,$$type:Bt,$$args:Et,$$inject:Mt,$$resource:Dt,$$asset:jt,$$singleton:Ct,$$serialize:Tt,$$deprecate:Pt,$$session:Wt,$$state:zt,$$conditional:Ht,$$noserialize:Ft,$$ns:Lt}=l,Rt=Y.isServer||Y.isWorker?null:(!0).document,Vt=n.context.current().name,Jt=Y.isServer?__filename:(!0).document.currentScript.src.replace((!0).document.location.href,"./"),Nt=Jt.substr(0,Jt.lastIndexOf("/")+1);n.loadPathOf("flair.app",Nt);let Ut=JSON.parse('{"host":"flair.app.ServerHost | flair.app.ClientHost","app":"flair.app.App","load":[],"container":{}}'),_t=t.Port("settingsReader");if("function"==typeof _t){let t=_t("flair.app");t&&(Ut=Object.assign(Ut,t))}Ut=Object.freeze(Ut);let qt=JSON.parse("{}");qt=Object.freeze(qt);let Gt=()=>{};n.context.current().currentAssemblyBeingLoaded("./flair.app{.min}.js"),await(async()=>{l("abstract"),l("ns","flair.app"),e("Bootware",function(){l("virtual"),this.construct=((t,e,i)=>{let r=N("name: string, version: string","name: string, version: string, isMountSpecific: boolean","name: string, isMountSpecific: boolean","name: string")(t,e,i);r.throwOnError(this.construct),this.info=Object.freeze({name:r.values.name||"",version:r.values.version||"",isMountSpecific:r.values.isMountSpecific||!1})}),l("virtual"),l("async"),this.boot=_,l("readonly"),this.info=null,l("virtual"),l("async"),this.ready=_,l("virtual"),this.dispose=_})})(),await(async()=>{const{IDisposable:t}=H();l("ns","flair.app"),e("Handler",[t],function(){l("virtual"),this.construct=(()=>{}),l("virtual"),this.dispose=(()=>{})})})(),await(async()=>{const{IDisposable:t}=H(),{Bootware:i}=H("flair.app");l("ns","flair.app"),e("App",i,[t],function(){l("override"),this.construct=(t=>{let e=j(this);t(e.title,e.version)}),l("override"),this.boot=(async t=>{t(),n.host().error.add(this.onError)}),l("virtual"),this.start=(async()=>{if(!Y.isServer&&!Y.isWorker){const{ViewState:t}=H("flair.ui");new t}}),l("virtual"),this.stop=(async()=>{if(!Y.isServer&&!Y.isWorker){const{ViewState:t}=H("flair.ui");(new t).clear()}}),l("virtual"),this.onError=(t=>{throw U.OperationFailed(t.error,this.onError)}),l("override"),this.dispose=(t=>{t(),n.host().error.remove(this.onError)})})})(),await(async()=>{const{IDisposable:t}=H(),{Bootware:i}=H("flair.app");l("ns","flair.app"),e("Host",i,[t],function(){l("privateSet"),this.isStarted=!1,l("virtual"),this.start=(async()=>{this.isStarted=!0}),l("virtual"),this.stop=(async()=>{this.isStarted=!1}),this.restart=(async()=>{await this.stop(),await this.start()}),this.error=Q(t=>({error:t})),this.raiseError=(t=>{this.error(t)})})})(),await(async()=>{const{Bootware:t}=H("flair.app");l("static"),l("ns","flair.app"),e("BootEngine",function(){this.start=async function(){let e=[],i=[];const r=async()=>{let r=null,a=null,s=null;for(let o of Ut.load)(o=at(o))&&(r=await u(o))&&"boolean"!=typeof r&&(a=g(r,t))&&(s=new a,e.push(s),s.info.isMountSpecific&&i.push(s))},a=async t=>{if(Y.isWorker){0!==i.length&&console.warn("Mount specific bootwares are not supported for worker environment. Revisit worker:flair.app->load setting.");for(let i of e)i.info.isMountSpecific||await i[t]()}else{let r=n.host().mounts,a=Object.keys(r),s="",o=null;o=r[s="main"];for(let i of e)await i[t](o);for(let e of a)if("main"!==e){o=r[e];for(let e of i)await e[t](o)}}},s=async()=>{if(!Y.isWorker){let e=at(Ut.host),i=g(await u(e),t),r=null;if(!i)throw U.InvalidDefinition(e,this.start);r=new i,await r.boot(),n.host(r)}await a("boot");let e=at(Ut.app),i=g(await u(e),t),r=null;if(!i)throw U.InvalidDefinition(e,this.start);r=new i,await r.boot(),n.app(r)},o=async()=>{Y.isWorker||await n.host().start(),await n.app().start()},l=()=>new Promise((t,e)=>{"loading"!==document.readyState?t():(!0).document.addEventListener("DOMContentLoaded",()=>{t()})}),c=()=>new Promise((t,e)=>{(!0).document.addEventListener("deviceready",()=>{t()},!1)}),p=async()=>{Y.isClient&&!Y.isWorker&&(await l(),Y.isCordova&&await c()),Y.isWorker||await n.host().ready(),await a("ready"),await n.app().ready()};await r(),await s(),await o(),await p(),console.log("ready!")}})})(),await(async()=>{const{Bootware:t}=H("flair.app");l("sealed"),l("ns","flair.boot"),e("DIContainer",t,function(){l("override"),this.construct=(t=>{t("DI Container")}),l("override"),this.boot=(async t=>{t();let e=Ut.container;for(let t in e)e.hasOwnProperty(t)&&f.register(t,e[t])})})})(),n.context.current().currentAssemblyBeingLoaded(""),n.registerAdo('{"name":"flair.app","file":"./flair.app{.min}.js","mainAssembly":"flair","desc":"True Object Oriented JavaScript","title":"Flair.js","version":"0.51.64","lupdate":"Mon, 06 May 2019 13:50:07 GMT","builder":{"name":"flairBuild","version":"1","format":"fasm","formatVersion":"1","contains":["init","func","type","vars","reso","asst","rout","sreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["flair.app.Bootware","flair.app.Handler","flair.app.App","flair.app.Host","flair.app.BootEngine","flair.boot.DIContainer"],"resources":[],"assets":[],"routes":[]}')});
/**
 * @preserve
 * Flair.js
 * True Object Oriented JavaScript
 * 
 * Assembly: flair.app
 *     File: ./flair.app.js
 *  Version: 0.17.27
 *  Sun, 17 Mar 2019 16:17:41 GMT
 * 
 * (c) 2017-2019 Vikas Burman
 * Licensed under MIT
 */
(()=>{"use strict";const e=void 0!==!0?require("flairjs"):"undefined"!=typeof WorkerGlobalScope?WorkerGlobalScope.flair:(!0).flair,{Class:t,Struct:i,Enum:s,Interface:r,Mixin:n}=e,{Aspects:o}=e,{AppDomain:a}=e,l=e.AppDomain.context.current().name,{$$:c,attr:p}=e,{bring:f,Container:u,include:d}=e,{Port:y}=e,{on:h,post:v,telemetry:w}=e,{Reflector:m}=e,{Serializer:b}=e,{Tasks:$}=e,{TaskInfo:g}=e.Tasks,{as:A,is:S,isComplies:C,isDerivedFrom:I,isImplements:k,isInstanceOf:D,isMixed:B}=e,{getAssembly:H,getAttr:M,getContext:O,getResource:j,getRoute:L,getType:T,ns:x,getTypeOf:W,typeOf:E}=e,{dispose:z,using:P}=e,{Args:R,Exception:F,noop:G,nip:V,nim:J,nie:U,event:q}=e,{env:N}=e.options,{forEachAsync:K,replaceAll:Q,splitAndTrim:X,findIndexByProp:Y,findItemByProp:Z,which:_,isArrowFunc:ee,isASyncFunc:te,sieve:ie,b64EncodeUnicode:se,b64DecodeUnicode:re}=e.utils,{$static:ne,$abstract:oe,$virtual:ae,$override:le,$sealed:ce,$private:pe,$privateSet:fe,$protected:ue,$protectedSet:de,$readonly:ye,$async:he}=c,{$enumerate:ve,$dispose:we,$post:me,$on:be,$timer:$e,$type:ge,$args:Ae,$inject:Se,$resource:Ce,$asset:Ie,$singleton:ke,$serialize:De,$deprecate:Be,$session:He,$state:Me,$conditional:Oe,$noserialize:je,$ns:Le}=c;let Te=JSON.parse('{"host":"flair.server.Server | flair.client.Client","app":"flair.server.App ~ flair.server.WorkerApp | flair.client.App ~ flair.client.WorkerApp","load":[],"container":{}}'),xe=e.Port("settingsReader");if("function"==typeof xe){let e=xe("flair.app");e&&(Te=Object.assign(Te,e))}Te=Object.freeze(Te),e.AppDomain.context.current().currentAssemblyBeingLoaded("./flair.app{.min}.js"),(async()=>{const{Bootware:e}=x();c("static"),c("ns","(root)"),t("BootEngine",function(){this.start=(async t=>{let i=[],s=[];const r=()=>{a.entryPoint(t)},n=async()=>{let e=null,t=null,r=null;for(let n of Te.load)(n=_(n))&&(e=await d(n))&&(t=A(e,t))&&(r=new t,i.push(r),r.info.isMountSpecific&&s.push(r))},o=async e=>{if(N.isWorker){0!==s.length&&console.warn("Mount specific bootwares are not supported for worker environment. Revisit worker:flair.app->load setting.");for(let t of i)t.info.isMountSpecific||await t[e]()}else{let t=a.host().mounts,r=Object.keys(t),n="",o=null;o=t[n="main"];for(let t of i)await t[e](n,o);for(let i of r)if("main"!==i){o=t[i];for(let t of s)await t[e](i,o)}}},l=async()=>{if(!N.isWorker){let t=_(Te.host),i=A(await d(t),e),s=null;if(!i)throw F.InvalidDefinition(t,this.start);s=new i,await s.boot(),a.host(s)}await o("boot");let t=_(Te.app),i=A(await d(t),e),s=null;if(!i)throw F.InvalidDefinition(t,this.start);s=new i,await s.boot(),a.app(s)},c=async()=>{N.isWorker||await a.host().start(),await a.app().start()},p=async()=>{N.isWorker||await a.host().ready(),o("ready"),await a.app().ready()};r(),await n(),await l(),await c(),await p()})})})(),(async()=>{c("abstract"),c("ns","(root)"),t("Bootware",function(){c("virtual"),this.construct=((e,t,i)=>{let s=R("name: string, version: string","name: string, version: string, isMountSpecific: boolean","name: string, isMountSpecific: boolean","name: string")(e,t,i);s.throwOnError(this.construct),this.info=Object.freeze({name:s.name||"",version:s.version||"",isMountSpecific:s.isMountSpecific||!1})}),c("virtual"),c("async"),this.boot=G,c("readonly"),this.info=null,c("virtual"),c("async"),this.ready=G})})(),(async()=>{c("ns","(root)"),n("LifeCycleHandler",function(){c("virtual"),this.start=(async()=>{this.isStarted=!0}),c("virtual"),this.stop=(async()=>{this.isStarted=!1}),c("privateSet"),c("type","boolean"),this.isStarted=!1,this.restart=(async()=>{await this.stop(),await this.start()}),c("virtual"),this.dispose=G})})(),(async()=>{const{IDisposable:e,ILifeCycleHandler:i,Bootware:s,LifeCycleHandler:r}=x();c("ns","flair.boot"),t("App",s,[r,i,e],function(){c("override"),this.construct=(e=>{let t=H(this);e(t.title,t.version)}),c("virtual"),this.dispose=G})})(),(async()=>{const{IDisposable:e,ILifeCycleHandler:i,Bootware:s,LifeCycleHandler:r}=x();c("ns","flair.boot"),t("ClientHost",s,[r,i,e],function(){c("virtual"),this.dispose=G})})(),(async()=>{const{IDisposable:e,ILifeCycleHandler:i,Bootware:s,LifeCycleHandler:r}=x();c("ns","flair.boot"),t("ServerHost",s,[r,i,e],function(){c("virtual"),this.dispose=G})})(),(async()=>{const{Bootware:e}=x();c("sealed"),c("ns","flair.bw"),t("DIContainer",e,function(){c("override"),this.construct=(e=>{e("DI Container")}),c("override"),this.boot=(async()=>{let e=Te.container;for(let t in e)e.hasOwnProperty(t)&&u.register(t,e[t])})})})(),e.AppDomain.context.current().currentAssemblyBeingLoaded(""),e.AppDomain.registerAdo('{"name":"flair.app","file":"./flair.app{.min}.js","desc":"True Object Oriented JavaScript","title":"Flair.js","version":"0.17.27","lupdate":"Sun, 17 Mar 2019 16:17:41 GMT","builder":{"name":"<<name>>","version":"<<version>>","format":"fasm","formatVersion":"1","contains":["initializer","types","enclosureVars","enclosedTypes","resources","assets","routes","selfreg"]},"copyright":"(c) 2017-2019 Vikas Burman","license":"MIT","types":["BootEngine","Bootware","LifeCycleHandler","flair.boot.App","flair.boot.ClientHost","flair.boot.ServerHost","flair.bw.DIContainer"],"resources":[],"assets":[],"routes":[]}')})();
//# sourceMappingURL=./flair.app.min.js.map
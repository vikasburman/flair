/**
 * FlairJS
 * True Object Oriented JavaScript
 * Version 0.15.27
 * Sun, 03 Feb 2019 00:59:28 GMT
 * (c) 2017-2019 Vikas Burman
 * MIT
 * https://flairjs.com
 */
(function(e){"use strict";let n=!0;n&&(e.build=require("./flair.build.js"));let t=Object.freeze(e);"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof exports?(void 0!==module&&module.exports&&(exports=module.exports=t),module.exports=exports=t):n||((!0).Flair=t)}).call(new Function("try {return global;}catch(e){return window;}")(),e=>{"use strict";let n=new Function("try {return this===global;}catch(e){return false;}")(),t=!0;if(t.flair){let n=null,r=null;for(let i of t.flair.members)r=t.flair[i]._,n=r&&r.reset?r.reset:null,"function"==typeof n&&n(),delete t[i];if(delete t.flair,"string"==typeof e&&"END"===e)return}e?"string"==typeof e&&(e={symbols:e.split(",").map(e=>e.trim())}):e={};const r=function(e,n,t){let r="",i="",s=null;e?"string"==typeof e?r=e:"object"==typeof e?(r=e.name||"UnknownException",s=e,i=s.message):r="UndefinedException":r="UndefinedException",n?"string"==typeof n?i=n:"object"==typeof n?s||(s=n,r=r||s.name,i=s.message):r="UndefinedException":s&&(r=r||s.name,i=s.message),t&&"object"==typeof t&&(s||(s=t)),r&&!r.endsWith("Exception")&&(r+="Exception");let o=new Error(i||"");return o.name=r||"UndefinedException",o.error=s||null,Object.freeze(o)},i=e=>{let n="";return"undefined"==typeof e&&(n="undefined"),n||null!==e||(n="null"),!n&&Array.isArray(e)&&(n="array"),!n&&e instanceof Date&&(n="date"),!n&&e._&&e._.type&&(n=e._.type),n||(n=typeof e),n},s=(e,n)=>{if("string"!==i(n))throw new r("InvalidArgument","Argument type is invalid. (type)");let t=!1,o="";return e&&("array"!==n&&"Array"!==n||(t=Array.isArray(e)),t||"date"!==n&&"Date"!==n||(t=e instanceof Date),!t&&"flair"===n&&e._&&e._.type&&(t=!0),t||(t=typeof e===n),t||e._&&e._.type&&(o=e._.type,t=o===n),!t&&o&&["instance","sinstance"].indexOf(o)!==-1&&(t=s.instanceOf(e,n))),t};s.instanceOf=((e,n)=>{let t=i(e),s=i(n),o=!1;if(["instance","sinstance"].indexOf(t)===-1)throw new r("InvalidArgument","Argument type is invalid. (obj)");if(["string","class","interface","structure","mixin"].indexOf(s)===-1)throw new r("InvalidArgument","Argument type is invalid. (type)");switch(t){case"instance":switch(s){case"class":o=e._.isInstanceOf(n);break;case"interface":o=e._.isImplements(n);break;case"mixin":o=e._.isMixed(n);break;case"string":o=e._.isInstanceOf(n),o||(o=e._.isImplements(n)),o||(o=e._.isMixed(n))}break;case"sinstance":switch(s){case"string":case"structure":o=e._.isInstanceOf(n)}}return o}),s.derivedFrom=((e,n)=>{if("class"!==i(e))throw new r("InvalidArgument","Argument type is invalid. (type)");if(["string","class"].indexOf(i(n))===-1)throw new r("InvalidArgument","Argument type is invalid. (parent)");return e._.isDerivedFrom(n)}),s.implements=((e,n)=>{if(["instance","class"].indexOf(i(e))===-1)throw new r("InvalidArgument","Argument type is invalid. (obj)");if(["string","interface"].indexOf(i(n))===-1)throw new r("InvalidArgument","Argument type is invalid. (intf)");return e._.isImplements(n)}),s.mixed=((e,n)=>{if(["instance","class"].indexOf(i(e))===-1)throw new r("InvalidArgument","Argument type is invalid. (obj)");if(["string","mixin"].indexOf(i(n))===-1)throw new r("InvalidArgument","Argument type is invalid. (mixin)");return e._.isMixed(n)});const o=(...e)=>{if(0===e.length)throw new r("InvalidArgument","Argument must be defined. (patterns)");let n=(...n)=>{let t=null,i=null,o="",u="",c=-1,f=-1,a=!1,l=0,p={raw:n||[],index:-1,isInvalid:()=>{return p.index===-1}};if(e)for(let d of e){c++,f=-1,a=!1,l=0,t=d.split(",");for(let e of t){if(f++,i=e.split(":"),2!==i.length?(o=`_${c}_${f}`,u=e.trim()||""):(o=i[0].trim()||"",u=i[1].trim()||""),["raw","index","isInvalid"].indexOf(o)!==-1)throw new r("InvalidArgument",`Argument name cannot be a reserved name. (${o})`);if(f>p.raw.length){a=!1;break}if(!s(p.raw[f],u)){a=!1;break}p[o]=p.raw[f],a=!0,l++}if(a&&l===p.raw.length){p.index=c;break}}return p};return Object.freeze(n)},u=()=>{return"_xxxxxxxx_xxxx_4xxx_yxxx_xxxxxxxxxxxx".replace(/[xy]/g,e=>{var n=16*Math.random()|0,t="x"==e?n:3&n|8;return t.toString(16)})},c=(e,n,t,i={})=>{if(!n||"string"!=typeof n)throw new r("InvalidArgument",`Argument type is invalid. (name)`);let s=i;return s.name=n,s.type=e,s.namespace=null,s.assembly=(()=>{return l.Assembly.get(n)||null}),s.id=u(),s.__={},t._=s,l.Namespace(t),t._=Object.freeze(t._),Object.freeze(t)},f=(e,n,t={})=>{let r=t;return r.type=e,r.id=u(),r.__={},n._=Object.freeze(r),Object.freeze(n)},a=(e,n)=>{if(n){if(e.indexOf("{.min}")!==-1)return l.options.env.isProd?e.replace("{.min}",".min"):e.replace("{.min}","")}else if(e.indexOf("|")!==-1){let n=e.split("|"),t="";return t=l.options.env.isServer?n[0].trim():n[1].trim(),"x"===t&&(t=""),t}return e};let l={members:[]},p=()=>{},d=e.symbols||[],m=(e,n)=>{e()},y=n?process.argv:new(!0).URLSearchParams((!0).location.search),g=d.indexOf("TEST")!==-1;g&&(d.indexOf("SERVER")!==-1?n=!0:d.indexOf("CLIENT")!==-1&&(n=!1));let h=Object.freeze({symbols:Object.freeze(d),env:Object.freeze({type:e.env||(n?"server":"client"),isTesting:g,isServer:n,isClient:!n,isProd:d.indexOf("PROD")!==-1,isDebug:d.indexOf("DEBUG")!==-1,global:t,supressGlobals:"undefined"!=typeof e.supressGlobals&&e.supressGlobals,args:y}),loaders:Object.freeze({module:Object.freeze({server:e.moduleLoaderServer||null,client:e.moduleLoaderClient||null}),file:Object.freeze({server:e.fileLoaderServer||null,client:e.fileLoaderClient||null}),define:(e,n)=>{if(o("string, function")(e,n).isInvalid())throw new r("InvalidArgument",`Arguments type error. (${e})`);let t=l.options.loaderOverrides;switch(e){case"sm":t.moduleLoaderServer=t.moduleLoaderServer||n;break;case"cm":t.moduleLoaderClient=t.moduleLoaderClient||n;break;case"sf":t.fileLoaderServer=t.fileLoaderServer||n;break;case"cf":t.fileLoaderClient=t.fileLoaderClient||n}}}),loaderOverrides:{moduleLoaderServer:null,moduleLoaderClient:null,fileLoaderServer:null,fileLoaderClient:null}});if(h.env.isProd&&h.env.isDebug)throw new r("InvalidOption",`DEBUG and PROD symbols are mutually exclusive. Use only one of these symbols.`);l._=Object.freeze({name:"FlairJS",version:"0.15.27",copyright:"(c) 2017-2019 Vikas Burman",license:"MIT",link:"https://flairjs.com",lupdate:new Date("Sun, 03 Feb 2019 00:59:28 GMT")}),l.info=l._,l.options=h,l.Exception=r,l.members.push("Exception"),l.Args=o,l.members.push("Args");let b={},_={};/**
     * @name Assembly
     * @description Constructs an Assembly object
     * @example
     *  Assembly(ado)
     * @params
     *  ado: object - An ADO is an object that defines assembly definition as:
     *      name: string - name
     *      file: string - file name and path
     *      desc: string - description
     *      version: string - version
     *      copyright: string - copyright message
     *      license: - string - license
     *      types: - array - list of all type names that reside in this assembly
     *      assets: - array - list of all assets that are available outside this assembly but deployed together
     *      settings: - assembly settings
     * @returns object - flair assembly object
     * @throws
     *  InvalidArgumentException
     *  InvalidFormatException
     */
l.Assembly=(e=>{if("object"!=typeof e)throw new r("InvalidArgument","Argument type is not valid. (ado)");if("array"!==i(e.types)||"array"!==i(e.assets)||"string"!=typeof e.name||"string"!=typeof e.file)throw new r("InvalidFormat","Object format is not valid. (ado)");let n=a(e.file,!0),t={name:e.name,file:n,desc:e.desc||"",version:e.version||"",copyright:e.copyright||"",license:e.license||"",types:Object.freeze(e.types.slice()),settings:Object.freeze(e.settings||{}),assets:Object.freeze(e.assets.slice()),hasAssets:e.assets.length>0,isLoaded:()=>{return s.isLoaded},load:()=>{return l.Assembly.load(n)},getType:e=>{if("string"!=typeof e)throw new r("InvalidArgument","Argument type is not valid. (name)");if(!s.isLoaded)throw new r("NotLoaded",`Object is not loaded. (${n})`);if(t.types.indexOf(e)===-1)throw new r("NotFound",`Object is not found. (${e})`);let i=l.Namespace.getType(e);if(!i)throw new r("NotRegistered",`Object is not registered. (${e})`);return i},createInstance:(e,...n)=>{if("string"!=typeof e)throw new r("InvalidArgument","Argument type is not valid. (name)");let i=t.getType(e),s=null;return s=n?new i(...n):new i}},s={name:e.name,ado:Object.freeze(e),isLoaded:!1,markLoaded:()=>{s.isLoaded=!0}};return f("assembly",t,s)}),/**
     * @name register
     * @description Register one or more assemblies as per given Assembly Definition Objects
     * @example
     *  register(...ados)
     * @params
     *  ados: object - An ADO is an object that defines assembly definition as:
     *      name: string - name
     *      file: string - file name and path
     *      desc: string - description
     *      version: string - version
     *      copyright: string - copyright message
     *      license: - string - license
     *      types: - array - list of all type names that reside in this assembly
     *      assets: - array - list of all assets that are available outside this assembly but deployed together
     *      settings: - assembly settings
     * @returns boolean - true/false
     * @throws
     *  InvalidArgumentException
     *  InvalidFormatException
     *  DuplicateNameException
     */
l.Assembly.register=((...e)=>{if(!e)throw new r("InvalidArgument","Argument type is not valid. (ados)");let n=!1;for(let t of e){let e=l.Assembly(t),i=e.file;if(b[i])throw new r("DuplicateName",`Duplicate names are not allowed. (${i})`);b[i]=e;for(let s of e.types){if(_[s])throw new r("DuplicateName",`Duplicate names are not allowed. (${s})`);_[s]=e}n=!0}return n}),l.Assembly.load=(e=>{return new Promise((t,i)=>{if("string"!=typeof e)return void i(new r("InvalidArgument","Argument type is not valid. (file)"));if(!l.Assembly.isRegistered(e))return void i(new r("NotRegistered",`Object is not registered. (${e})`));if(b[e].isLoaded())return void t();if(n)try{require(e),b[e]._.markLoaded(),t()}catch(n){i(new r("FileLoad",`File load failed. (${e})`,n))}else{const n=l.options.env.global.document.createElement("script");n.onload=(()=>{b[e]._.markLoaded(),t()}),n.onerror=(n=>{i(new r("FileLoad",`File load failed. (${e})`,n))}),n.async=!0,n.src=e,l.options.env.global.document.body.appendChild(n)}})}),l.Assembly.isRegistered=(e=>{if("string"!=typeof e)throw new r("InvalidArgument","Argument type if not valid. (file)");return"undefined"!=typeof b[e]}),l.Assembly.isLoaded=(e=>{if("string"!=typeof e)throw new r("InvalidArgument","Argument type if not valid. (file)");return"undefined"!=typeof b[e]&&b[e].isLoaded()}),l.Assembly.get=(e=>{if("string"!=typeof e)throw new r("InvalidArgument","Argument type if not valid. (type)");return _[e]||null}),l.Assembly.all=(()=>{return Object.values(b).slice()}),l.Assembly.allTypes=(()=>{return Object.keys(_).slice()}),l.Assembly._={reset:()=>{b={},_={}}},l.members.push("Assembly"),l.Namespace=(e=>{if(["class","enum","interface","mixin","structure","resource","proc"].indexOf(e._.type)===-1)throw`Type (${e._.type}) cannot be placed in a namespace.`;if(e._.namespace)throw`Type (${e._.name}) is already contained in a namespace.`;let n=!1;e._.name.startsWith("~")&&(e._.name=e._.name.substr(1),n=!0);let t=l.Namespace.root,r=e._.name,i="",s=r.substr(0,r.lastIndexOf("."));if(r=r.substr(r.lastIndexOf(".")+1),s){let n=s.split(".");for(let r of n)if(r){if("_"===r)throw`Special name "_" is used as namespace in ${e._.name}.`;if(t[r]=t[r]||{},i=r,t[r]._&&"namespace"!==t[r]._.type)throw`${e._.name} cannot be contained in another type (${t[r]._.name})`;t=t[r]}}else if(!n)return;if(t[r])throw`Type ${r} already contained at ${s}.`;t[r]=e,e._.namespace=t,t._=t._||{},t._.name=t._.name||i,t._.type=t._.type||"namespace",t._.types=t._.types||[],t._.types.push(e);let o=()=>{return t._.types.slice()},u=e=>{let n=null,r=t;if(e.indexOf(".")!==-1){let t=e.split(".");for(let i of t)if(i){if("_"===i)throw`Special name "_" is used as name in ${e}.`;if(r=r[i],!r)break}n=r}else n=r[e];return n&&n._&&["class","enum","interface","mixin","structure"].indexOf(n._.type)!==-1?n:null},c=(e,...n)=>{let r=t.getType(e);if(r&&"class"!=r._.type)throw`${I} is not a class.`;return r?new r(...n):null};t.getTypes=t.getTypes||o,t.getType=t.getType||u,t.createInstance=t.createInstance||c}),l.Namespace.root={},l.Namespace.getType=(e=>{return l.Namespace.root.getType?l.Namespace.root.getType(e):null}),l.Namespace.getTypes=(()=>{return l.Namespace.root.getTypes?l.Namespace.root.getTypes():[]}),l.Namespace.createInstance=((e,...n)=>{return l.Namespace.root.createInstance?l.Namespace.root.createInstance(e,...n):null}),l.Namespace._={reset:()=>{}},l.members.push("Namespace"),l.Types=(e=>{if("string"!==i(e))throw new r("InvalidArgument","Argument type is not valid. (name)");return l.Namespace.getType(e)}),l.members.push("Types"),l.Class=((e,n,t,r)=>{let i=e,s=null,o=[],u=[],c=null;"function"==typeof t?(c=t,Array.isArray(n)?o=n:s=n):"function"==typeof r?(s=n,o=t,c=r):"function"==typeof n&&(c=n);let f=[];for(let a of o)switch(a._.type){case"mixin":f.push(a);break;case"interface":u.push(a)}o=f;let d=function(e,n,...t){let r=d._.inherits,f={},a={},y=null,g=[],b={},_={},w=[],v=[],x=!1,O=null,A="__flag__",I=null;if(y=d._.singleInstance())return y;if(e&&e===A?(O=n,x=!0,v=t):(O=d._.static,"undefined"!=typeof e?(v=v.concat([e]),"undefined"!=typeof n&&(v=v.concat([n]),"undefined"!=typeof t&&(v=v.concat(t)))):v=t),r&&(f=new r(A,O,...v),r._.isSealed()||r._.isSingleton()))throw`${i} cannot inherit from a sealed/singleton class ${r._.name}.`;const j=()=>{return"_xxxxxxxx_xxxx_4xxx_yxxx_xxxxxxxxxxxx".replace(/[xy]/g,e=>{var n=16*Math.random()|0,t="x"==e?n:3&n|8;return t.toString(16)})},k=()=>{return G("singleton",b._constructor)},S=()=>{return G("abstract",b._constructor)},C=e=>{return["constructor","dispose","_constructor","_dispose","_"].indexOf(e)!==-1},N=e=>{return"undefined"!=typeof b[e]},E=e=>{return!N(e)&&f._.instanceOf.findIndex(n=>{return!!n.meta[e]})!==-1},M=e=>{let n="";if("undefined"!=typeof b[e])n=b[e].type;else for(let t of f._.instanceOf)if(t.meta[e]){n=t.meta[e].type;break}return n},L=e=>{return G("sealed",b[e])},T=e=>{return G("static",b[e])},P=e=>{return G("private",b[e])},z=e=>{return G("hide",b[e])},D=e=>{return B("protected",e)},R=e=>{return B("serialize",e)},F=e=>{let n=!0,t=b[e],r="";if(t)for(let i of t)if("conditional"===i.name){switch(n=!1,r=i.args&&i.args.length>0?i.args[0]:""){case"server":n=h.env.isServer===!0;break;case"client":n=h.env.isServer===!1;break;default:n=h.symbols.indexOf(r)!==-1}break}return n},U=e=>{Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(f,e))},W=e=>{return!e.hasOwnProperty("prototype")},J=(e,...n)=>{let t=null;"string"==typeof e?t=l.Container.get(e)[0]:(t=e,e=t._.name),g.push({name:e,Attr:t,args:n})},V=(e,n)=>{let t=null;for(let r of f._.instanceOf)if(r.meta[n]){for(let i of r.meta[n])if(i.name===e){t=i.args;break}if(t)break}return null!==t?t:[]},q=e=>{let n=null,t=b[e].type,r=null,i=null,s=null;for(let o of b[e])if(n=o.Attr,n&&(r=o.args||[],i=new n(...r),s=i.decorator(),"function"==typeof s)){let n=Object.getOwnPropertyDescriptor(f,e);s(f,t,e,n),Object.defineProperty(f,e,n)}},G=(e,n)=>{let t=!1;return n&&(t=n.findIndex(n=>{return n.name===e})!==-1),t},B=(e,n)=>{return f._.instanceOf.findIndex(t=>{return!!t.meta[n]&&G(e,t.meta[n])})!==-1},H=e=>{let n=!1,t=f._.instanceOf.length,r=1;for(let i of f._.instanceOf){if(i.meta[e]&&r!==t){n=!0;break}r++}return n},K=(e,n)=>{let t=f[e],r=[],s=[],o=[],u=null,c=null;for(let a of n)u=new a,c=u.before(),"function"==typeof c&&r.push(c),c=u.around(),"function"==typeof c&&o.push(c),c=u.after(),"function"==typeof c&&s.push(c);o.length>0&&o.reverse();let l=function(...n){let u=null,c=null,a={obj:()=>{return f},className:()=>{return i},funcName:()=>{return e},error:e=>{return e&&(u=e),u},result:e=>{return"undefined"!=typeof e&&(c=e),c},args:()=>{return n},data:{}};for(let l of r)try{l(a)}catch(e){u=e}const p=e=>{for(let n of s)try{n(e)}catch(e){a.error(e)}};let d=t,m=!1,y=null;for(let g of o)d=g(a,d);try{y=d(...n),y&&"function"==typeof y.then?(m=!0,a.result(new Promise((e,n)=>{y.then(n=>{a.result(n),p(a),e(a.result())}).catch(e=>{a.error(e),p(a),n(a.error())})}))):(a.result(y),p(a))}catch(e){a.error(e)}return a.result()}.bind(f);return l},$=()=>{if(["Attribute","Aspect"].indexOf(i)===-1&&!f._.isInstanceOf("Attribute")&&!f._.isInstanceOf("Aspect")){let e=[];for(let n in b)b.hasOwnProperty(n)&&"func"===b[n].type&&!C(n)&&(e=l.Aspects.get(i,n,b[n]),e.length>0&&(b[n].aspects=e.slice(),Object.defineProperty(f,n,{value:K(n,e)})))}},Q=(e,n,t)=>{let r="";for(let i in f)f.hasOwnProperty(i)&&("prop"!==M(i)||!R(i)||B("readonly",i)||T(i)||P(i)||D(i)||C(i)||(r=V("serialize",i)[0]||i,t?n[i]=e[r]||n[i]:n[r]=e[i]))};f.func=((e,n)=>{if("function"==typeof e&&(n=e,e="constructor"),"_"===e)throw`${i}.${e} is not allowed.`;n||(n=p),C(e)&&(e="_"+e),null!==I&&J("mixed",I),b[e]=[].concat(g),b[e].type="func",b[e].aspects=[],b[e].interfaces=[],g=[];let t=b[e];if(!F(e))return void delete b[e];if(G("override",t)){let r=Object.getOwnPropertyDescriptor(f,e);if(!r||"function"!=typeof r.value)throw"_constructor"===e&&(e="constructor"),"_dispose"===e&&(e="dispose"),`${i}.${e} is not a function to override.`;if(B("sealed",e)&&!G("sealed",t))throw"_constructor"===e&&(e="constructor"),"_dispose"===e&&(e="dispose"),`${i}.${e} cannot override a sealed function.`;let s=f[e].bind(f);Object.defineProperty(f,e,{value:function(...e){let t=[s].concat(e);return W(n)?n(...t):n.apply(f,t)}.bind(f)})}else{if(H(e))throw"_constructor"===e&&(e="constructor"),"_dispose"===e&&(e="dispose"),`${i}.${e} is already defined.`;Object.defineProperty(f,e,{configurable:!0,enumerable:!0,writable:!1,value:function(...e){return W(n)?n(...e):n.apply(f,e)}.bind(f)})}q(e),b[e].ref=f[e],b[e].raw=n}),f.construct=((...e)=>{f.func.apply(f,["constructor"].concat(e))}),f.destruct=((...e)=>{f.func.apply(f,["dispose"].concat(e))}),f.prop=((e,n,t)=>{if(C(e))throw`${i}.${e} can only be defined as a function.`;"undefined"==typeof n&&"undefined"==typeof t&&(n=null),null!==I&&J("mixed",I),b[e]=[].concat(g),b[e].type="prop",b[e].aspects=[],b[e].interfaces=[],g=[];let r=b[e];if(!F(e))return void delete b[e];if(G("override",r)){let n=Object.getOwnPropertyDescriptor(f,e);if(!n||"function"!=typeof n.get)throw`Not a property to override. (${i}.${e})`;if(B("sealed",e)&&!G("sealed",r))throw`Cannot override a sealed property. (${i}.${e})`;if(B("static",e)&&!G("static",r))throw`Cannot override a static property. (${i}.${e})`}else if(H(e))throw`${i}.${e} is already defined.`;if("function"!=typeof n){let t=null,s="",o=!1;if(B("static",e)){if(s=e,B("session",e)||B("state",e))throw`A static property cannot be stored in session/state. (${i}.${e})`;t=O,t[s]||(t[s]=n)}else if(B("session",e)){if(!sessionStorage)throw`Session store (sessionStorage) is not available. (${i}.${e})`;s=i+"_"+e,t=sessionStorage,o=!0,"undefined"==typeof t[s]&&(t[s]=JSON.stringify({value:n}))}else if(B("state",e)){if(!sessionStorage)throw`State store (localStorage) is not available. (${i}.${e})`;s=i+"_"+e,t=localStorage,o=!0,"undefined"==typeof t[s]&&(t[s]=JSON.stringify({value:n}))}else s=e,t=_,t[s]=n;Object.defineProperty(f,e,{__proto__:null,configurable:!0,enumerable:!0,get:()=>{return o?JSON.parse(t[s]).value:t[s]},set:G("readonly",r)?n=>{if(!(f._.constructing||G("once",r)&&!t[s]))throw`${e} is readonly.`;o?t[s]=JSON.stringify({value:n}):t[s]=n}:e=>{o?t[s]=JSON.stringify({value:e}):t[s]=e}})}else{if(G("static",r))throw`Static properties cannot be defined with a getter/setter. (${i}.${e})`;if(G("session",r)||G("state",r))throw`Properties defined with a getter/setter cannot be stored in session/state. (${i}.${e})`;Object.defineProperty(f,e,{__proto__:null,configurable:!0,enumerable:!0,get:n,set:G("readonly",r)?i=>{if(!(f._.constructing||G("once",r)&&!n()))throw`${e} is readonly.`;"function"==typeof t&&t(i)}:e=>{"function"==typeof t&&t(e)}})}q(e),b[e].ref={get:()=>{return f[e]},set:n=>{f[e]=n}}}),f.event=((e,n)=>{if(C(e))throw`${i}.${e} can only be defined as a function.`;if(H(e))throw`${i}.${e} is already defined.`;b[e]=[],b[e].type="event",b[e].aspects=[],b[e].interfaces=[],g.length>0&&(console.warn(`Attributes can only be applied to properties or functions. ${i}.${e} is an event.`),g=[]);let t=function(...t){let r={};"function"==typeof n&&(r=n(...t));let i={name:e,args:r,stop:!1};for(let s of w)if(s(i),i.stop)break}.bind(f);t.subscribe=(e=>{w.push(e)}),t.subscribe.all=(()=>{return w.slice()}),t.unsubscribe=(e=>{let n=w.indexOf(e);n!==-1&&w.splice(n,1)}),t.unsubscribe.all=(()=>{w=[]}),Object.defineProperty(f,e,{configurable:!1,enumerable:!0,value:t,writable:!1}),b[e].ref=f[e]}),f.noop=p,f.noopAsync=m,f._=f._||{},f._.type="instance",f._.name=i,f._.id=j(),f._.instanceOf=f._.instanceOf||[],s||f._.instanceOf.push({name:"Object",type:Object,meta:[],mixins:[],interfaces:[]}),f._.instanceOf.push({name:i,type:d,meta:b,mixins:o,interfaces:u}),f._.inherits=d,f._.isInstanceOf=(e=>{return e._&&e._.name&&(e=e._.name),f._.instanceOf.findIndex(n=>{return n.name===e})!==-1}),f._.raw=(e=>{return b[e]&&b[e].raw?b[e].raw:null}),f._.isMixed=(e=>{e._&&e._.name&&(e=e._.name);let n=!1;for(let t of f._.instanceOf)for(let r of t.mixins){if(r._.name===e){n=!0;break}if(n)break}return n}),f._.isImplements=(e=>{e._&&e._.name&&(e=e._.name);let n=!1;for(let t of f._.instanceOf)for(let r of t.interfaces){if(r._.name===e){n=!0;break}if(n)break}return n}),f._._={hasAttr:G,hasAttrEx:B,isOwnMember:N,isDerivedMember:E,isProtectedMember:D,isSealedMember:L,isSerializableMember:R},f._.serialize=(()=>{let e={};return Q(f,e),e}),f._.deserialize=(e=>{Q(e,f,!0)});const X=J;if(X.attr=J,c.apply(f,[X]),e!==A&&S())throw`Cannot create instance of an abstract class. (${i})`;if(0!==o.length)for(let Y of o)"mixin"===Y._.type&&(I=Y,Y.apply(f,[X]),I=null);delete f.func,delete f.construct,delete f.destruct,delete f.prop,delete f.event,delete f.noop,delete f.noopAsync,$(),x||("function"==typeof f._constructor&&(f._.constructing=!0,f._constructor(...v),f._.constructor=this._constructor,delete f._constructor,delete f._.constructing),"function"==typeof f._dispose&&(f._.dispose=f._dispose,delete f._dispose));let Z=!1;U("_");for(let ee in f)Z=!1,f.hasOwnProperty(ee)&&(Z=!0,N(ee)?(P(ee)&&(Z=!1),Z&&D(ee)&&!x&&(Z=!1)):(D(ee)&&!x&&(Z=!1),Z&&!E(ee)&&(Z=!1))),Z&&z(ee)&&(Z=!1),Z&&U(ee);for(let ee in a)!C(ee)&&N(ee)&&L(ee)&&Object.defineProperty(a,ee,{configurable:!1});if(0!==u.length)for(let ne of u)for(let te in ne)if(ne.hasOwnProperty(te)&&"_"!==te){let e=ne[te],n=typeof a[te];if("undefined"===n)throw`${ne._.name}.${te} is not defined.`;switch(e.type){case"func":if("function"!==n)throw`${ne._.name}.${te} is not a function.`;b[te].interfaces.indexOf(ne)===-1&&b[te].interfaces.push(ne);break;case"prop":if("function"===n)throw`${ne._.name}.${te} is not a property.`;b[te].interfaces.indexOf(ne)===-1&&b[te].interfaces.push(ne);break;case"event":if("function"!==n||"function"!=typeof a[te].subscribe)throw`${ne._.name}.${te} is not an event.`;b[te].interfaces.indexOf(ne)===-1&&b[te].interfaces.push(ne)}}return f._.pu=x?null:a,f._.pr=x?null:f,k()?(d._.isSingleton=(()=>{return!0}),d._.singleInstance=(()=>{return Object.freeze(a)}),d._.singleInstance.clear=(()=>{d._.singleInstance=(()=>{return null}),d._.isSingleton=(()=>{return!1})}),d._.singleInstance()):L("_constructor")?(d._.isSealed=(()=>{return!0}),Object.freeze(a)):a};return d._={inherits:s,mixins:o,interfaces:u,name:i,type:"class",namespace:null,singleInstance:()=>{return null},isSingleton:()=>{return!1},isSealed:()=>{return!1},isDerivedFrom:e=>{e._&&e._.name&&(e=e._.name);let n="Object"===e,t=s;if(!n)while(!0){if(null===t)break;if(t._.name===e){n=!0;break}t=t._.inherits}return n},isMixed:e=>{e._&&e._.name&&(e=e._.name);let n=!1;for(let t of o)if(t._.name===e){n=!0;break}return n},isImplements:e=>{e._&&e._.name&&(e=e._.name);let n=!1;for(let t of u)if(t._.name===e){n=!0;break}return n},static:{}},d._.singleInstance.clear=(()=>{}),l.Namespace(d),d}),l.members.push("Class"),l.Mixin=((e,n)=>{return n._={name:e,type:"mixin",namespace:null},l.Namespace(n),n}),l.members.push("Mixin"),l.Interface=((e,n)=>{let t={},r={};const i=e=>{return["constructor","dispose","_constructor","_dispose","_"].indexOf(e)!==-1};return r.func=(n=>{if("undefined"!=typeof t[n])throw`${e}.${n} is already defined.`;if(i(n))throw`${e}.${n} can only be defined for a class.`;t[n]=[],t[n].type="func"}),r.prop=(n=>{if("undefined"!=typeof t[n])throw`${e}.${n} is already defined.`;if(i(n))throw`${e}.${n} can only be defined as a function for a class.`;t[n]=[],t[n].type="prop"}),r.event=(n=>{if("undefined"!=typeof t[n])throw`${e}.${n} is already defined.`;if(i(n))throw`${e}.${n} can only be defined as a function for a class.`;t[n]=[],t[n].type="event"}),t._={name:e,type:"interface",namespace:null},l.Namespace(t),n.apply(r),delete r.func,delete r.prop,delete r.event,t}),l.members.push("Interface"),l.Enum=((e,n)=>{if("object"!=typeof n&&!Array.isArray(n))throw l.Exception("ENUM01","Invalid enum data.");let t=n;if(Array.isArray(n)){let e=0,t={};for(let r of n)t[e]=r,e++}let r={keys:()=>{let e=[];for(let n in t)t.hasOwnProperty(n)&&"_"!==n&&e.push(n);return e},values:()=>{let e=[];for(let n in t)t.hasOwnProperty(n)&&"_"!==n&&e.push(t[n]);return e}};return c("enum",e,t,r)}),l.Enum.getKeys=(e=>{try{return e._.keys()}catch(e){throw l.Exception("ENUM02","Object is not an Enum.",e)}}),l.Enum.getValues=(e=>{try{return e._.values()}catch(e){throw l.Exception("ENUM02","Object is not an Enum.",e)}}),l.Enum.isDefined=((e,n)=>{return l.Enum.getKeys().indexOf(n)!==-1||l.Enum.getValues().indexOf(n)!==-1}),l.members.push("Enum"),l.Proc=((e,n,t)=>{"function"==typeof n&&(t=n,n=!1);let r=t;return r.isASync=(()=>{return n}),r._={name:e,type:"proc",namespace:null,invoke:(...e)=>{t(...e)}},l.Namespace(r),Object.freeze(r)}),l.Resource=((e,n,t)=>{const r=e=>{return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function e(n,t){return String.fromCharCode("0x"+t)}))},i=e=>{return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))};let s=t,o=n.substr(n.lastIndexOf(".")+1).toLowerCase(),u=["txt","xml","js","json","md","css","html","svg"];if(u.indexOf(o)!==-1)if(l.options.env.isServer){let e=new Buffer(s).toString("base64");s=e.toString("utf8")}else s=i(s);else l.options.env.isServer&&(s=new Buffer(s).toString("base64"));let c={file:()=>{return n},type:()=>{return o},get:()=>{return s},load:(...e)=>{if(l.options.env.isClient&&!c._.isLoaded)if(c._.isLoaded=!0,["gif","jpeg","jpg","png"].indexOf(o)!==-1){let n=e[0];if(n){let e=new Image;e.src="data:image/png;base64,"+t,n.appendChild(e),c._.isLoaded=!0}}else{let t,r,i,u=null;switch(o){case"css":t=l.options.env.global.document.createElement("style"),t.type="text/css",t.name=n,t.innerHTML=s,l.options.env.global.document.head.appendChild(t);break;case"js":r=l.options.env.global.document.createElement("script"),r.type="text/javascript",r.name=n,r.src=s,"function"==typeof cb&&(r.onload=e[0],r.onerror=(()=>{c._.isLoaded=!1})),l.options.env.global.document.head.appendChild(r);break;case"html":i=e[0],u=e[1]||"",i&&(u?i.innerHTML=s:i.insertAdjacentHTML(u,s))}}return c._.isLoaded}};if(c._={name:e,type:"resource",namespace:null,file:n,isLoaded:!1,data:()=>{return s}},c.JSON=null,"json"===c.type())try{c.JSON=Object.freeze(JSON.parse(s))}catch(e){}return l.Namespace(c),Object.freeze(c)}),l.Resource.get=(e=>{let n=l.Namespace.getType(e);return n._&&"resource"===n._.type?n.get():null}),l.Structure=((e,n)=>{if("function"!=typeof n)throw l.Exception("STRU01","Invalid structure definition type.");let t=function(...e){let r={};n.apply(r,...e);let i={inherits:t,isInstanceOf:e=>{return e._&&e._.name&&(e=e._.name),t._.name===e}};return f("sinstance",r,i)},r={};return c("structure",e,t,r)}),l.members.push("Structure"),l.using=((e,n)=>{if("instance"!==i(e))throw new r("InvalidArgument","Argument type is invalid. (obj)");if("function"!==i(n))throw new r("InvalidArgument","Argument type is invalid. (fn)");let t=null,s=!1,o=!1,u=()=>{s||"function"!=typeof e._.dispose||(s=!0,e._.dispose())};try{t=n(e),t&&"function"==typeof t.finally&&(o=!0,t=t.finally(e=>{return u(),e}))}finally{o||u()}return t}),l.members.push("using"),l.as=((e,n)=>{return s(e,n)?e:null}),l.members.push("as"),l.typeOf=i,l.members.push("typeOf"),l.is=s,l.members.push("is"),l.isDerivedFrom=s.derivedFrom,l.members.push("isDerivedFrom"),l.isImplements=s.implements,l.members.push("isImplements"),l.isInstanceOf=s.instanceOf,l.members.push("isInstanceOf"),l.isMixed=s.mixed,l.members.push("isMixed");let w={};l.Container=((e,n)=>{if("string"!=typeof e)throw new r("InvalidArgument","Argument type is invalid. (alias)");return n?(w[e]||[]).slice():w[e]&&w[e].length>0?w[e][0]:null}),l.Container.isRegistered=(e=>{if("string"!=typeof e)throw new r("InvalidArgument","Argument type is invalid. (alias)");return"undefined"!=typeof w[e]&&w[e].length>0}),l.Container.register=((e,n)=>{if("string"!=typeof e)throw new r("InvalidArgument","Argument type is not valid. (alias)");if(!n)throw new r("InvalidArgument","Argument type is not valid. (type)");if(s(n,"flair"));else if("object"==typeof n);else{if("string"!=typeof n)throw new r("UnsupportedType",`Type is not supported. (${i(n)})`);n=a(n),n.endsWith(".js")||n.endsWith(".mjs")}return w[e]||(w[e]=[]),w[e].push(n),!0}),l.Container.resolve=((e,n,...t)=>{if("string"!=typeof e)throw new r("InvalidArgument","Argument type is not valid. (alias)");if("boolean"!=typeof n)throw new r("InvalidArgument","Argument type is not valid. (isMultiResolve)");let s=null,o=e=>{let n=e;if("string"==typeof e)if(e.endsWith(".js")||e.endsWith(".mjs"));else{let n=l.Namespace.getType(e);n&&(e=n)}return["class","structure"].indexOf(i(e))!==-1&&(n=t?new e(...t):new e),n};if(w[e]&&w[e].length>0)if(n){s=[];for(let n of w[e])s.push(o(n))}else{let n=w[e][0];s=o(n)}return s}),l.Container._={reset:()=>{w={}}},l.members.push("Container"),l.Attribute=l.Class("Attribute",function(e){let n=null;e("abstract"),this.construct((...e)=>{this.args=[];for(let n of e)if("string"==typeof n)if(n.startsWith("[")&&n.endsWith("]")){let e=n.replace("[","").replace("]",""),t=function(){let n=this[e];return"function"==typeof n?n():n};this.args.push(t)}else this.args.push(n);else this.args.push(n)}),this.prop("args",[]),this.func("decorator",e=>{return"function"==typeof e&&(n=e),n}),this.func("resetEventInterface",(e,n)=>{n.subscribe=e.subscribe,n.unsubscribe=e.unsubscribe,delete e.subscribe,delete e.unsubscribe})}),l.Container.register("async",l.Class("async",l.Attribute,function(){this.decorator((e,n,t,r)=>{if(["func"].indexOf(n)===-1)throw`async attribute cannot be applied on ${n} members.`;if(["_constructor","_dispose"].indexOf(n)!==-1)throw`async attribute cannot be applied on special function.`;let i=r.value;r.value=function(...e){return new Promise((n,t)=>{let r=[n,t].concat(e);i(...r)})}.bind(e)})})),l.Container.register("deprecate",l.Class("deprecate",l.Attribute,function(){this.decorator((e,n,t,r)=>{if(["_constructor","_dispose"].indexOf(n)!==-1)throw`deprecate attribute cannot be applied on special function.`;let i=`${t} is deprecated.`,s,o,u,c=null;switch("undefined"!=typeof this.args[0]&&(i+=" "+this.args[0]),n){case"prop":r.get&&(s=r.get,r.get=function(){return console.warn(i),s()}.bind(e)),r.set&&(o=r.set,r.set=function(e){return console.warn(i),o(e)}.bind(e));break;case"func":u=r.value,r.value=function(...e){console.warn(i),u(...e)}.bind(e);break;case"event":c=r.value,r.value=function(...e){console.warn(i),c(...e)}.bind(e),this.resetEventInterface(u,r.value)}})})),l.Container.register("enumerate",l.Class("enumerate",l.Attribute,function(){this.decorator((e,n,t,r)=>{if(["_constructor","_dispose"].indexOf(n)!==-1)throw`enumerate attribute cannot be applied on special function.`;let i=this.args[0];r.enumerable=i})}));let v=[];l.include=((e,n)=>{let t=i(e),s=null;"string"!==t&&"array"!==t&&(s=new r("InvalidArgument","Argument type is invalid. (deps)")),s||"string"!==t||(e=[e]),s||"function"==typeof n||(s=new r("InvalidArgument","Argument type is invalid. (fn)"));let o={},u=s?null:e.slice(),c=(e,n,t)=>{let r=l.options.loaders,i=l.options.loaderOverrides,s=null;return new Promise((o,u)=>{let c=t.substr(t.lastIndexOf(".")+1).toLowerCase();if(e)if(n)if(s=r.module.server||i.moduleLoaderServer||null,"function"==typeof s)s(t).then(o).catch(u);else try{o(require(t))}catch(e){u(e)}else if(s=r.file.server||i.fileLoaderServer||null,"function"==typeof s)s(t).then(o).catch(u);else try{let e=null,n="";e=t.startsWith("https")?require("https"):require("http"),e.get(t,e=>{e.on("data",e=>{n+=e}),e.on("end",()=>{o("json"===c?JSON.parse(n):n)})}).on("error",u)}catch(e){u(e)}else if(n)if(s=r.module.client||i.moduleLoaderClient||null,"function"==typeof s)s(t).then(o).catch(u);else try{if("undefined"!=typeof require)require([t],o,u);else{let e=l.options.env.global.document.createElement("script");e.type="text/javascript",e.name=t,e.src=t,e.onload=o,e.onerror=u,l.options.env.global.document.head.appendChild(e)}}catch(e){u(e)}else s=r.file.client||i.fileLoaderClient||null,"function"==typeof s?s(t).then(o).catch(u):fetch(t).then(e=>{200!==e.status?u(e.status):"json"===c?e.json().then(o).catch(u):o(e.text())}).catch(u)})},f=(e,n)=>{if("string"!=typeof e)throw new r("InvalidArgument","Argument type is not valid. (name)");if(!o[e])throw new r("InvalidName",`Given name is not valid. (${e})`);if(o[e].error&&n)throw o[e].error;return o[e].dep},p=()=>{"function"==typeof n&&n(f,s)},d=()=>{if(s||0===u.length)return void p();{let e=u.shift().trim(),n="",t=null,i=null;if(""===e)return s=new r("InvalidArgument",`Argument type is invalid. (deps)`),void p();let f=e.split(":");if(2!==f.length)return s=new r("InvalidArgument",`Argument type is invalid. (${e})`),void p();if(n=f[0].trim(),e=f[1].trim(),o[n])return s=new r("DuplicateName",`Duplicate names are not allowed. (${n})`),void p();o[n]={error:null,dep:null},e=a(e);let m=n=>{if(e.startsWith("[")&&e.endsWith("]")&&e.indexOf(".")===-1){let n=e.substr(1,e.length-2).trim();l.Container.isRegistered(n)&&(t=l.Container(n),"string"==typeof t&&(e=t,t=null))}n()},y=n=>{t=l.Namespace.getType(e),n()},g=n=>{let s=l.Assembly.get(e);s?s.isLoaded()?(t=l.Namespace.getType(e),n()):s.load().then(()=>{t=l.Namespace.getType(e),n()}).catch(e=>{i=new r("AssemblyLoad",`Assembly load operation failed with error: ${e}. (${s.file()})`),n()}):n()},h=n=>{let s=e.substr(e.lastIndexOf(".")+1).toLowerCase();s?"js"===s||"mjs"===s?(e=a(e,!0),n()):c(l.options.env.isServer,!1,e).then(e=>{t=e,n()}).catch(t=>{i=new r("FileLoad",`File load failed. (${e})`,t),n()}):n()},b=n=>{c(l.options.env.isServer,!0,e).then(e=>{t=e,n()}).catch(t=>{i=new r("ModuleLoad",`Module load operation failed with error: ${t}. (${e})`),n()})},_=e=>{o[n].error=i,o[n].dep=t,e||v.pop(),d()};if(""===e)return void _(!0);if(v.indexOf(e)!==-1)return i=new r("CircularDependency",`Circular dependency identified. (${e})`),void _(!0);v.push(e),m(()=>{t?_():y(()=>{t?_():g(()=>{t?_():h(()=>{t?_():b(()=>{return t?void _():(i=new r("DependencyResolution",`Failed to resolve dependency. ${e}`),void _())})})})})})}};d()}),l.include._={reset:()=>{v=[]}},l.members.push("include"),l.Container.register("inject",l.Class("inject",l.Attribute,function(){this.decorator((e,n,t,r)=>{if(["func","prop"].indexOf(n)===-1)throw`inject attribute cannot be applied on ${n} members.`;if(["_constructor","_dispose"].indexOf(t)!==-1)throw`inject attribute cannot be applied on special function.`;let i=this.args[0],s=this.args[1],o=null,u=null;switch(Array.isArray(s)||(s=[s]),"string"==typeof i?(i=a(i),o=l.Container.resolve(i,!1,...s)):o=new i(...s),n){case"func":u=r.value,r.value=function(...e){u(o,...e)}.bind(e);break;case"prop":e[t]=o}})})),l.Container.register("multiinject",l.Class("multiinject",l.Attribute,function(){this.decorator((e,n,t,r)=>{if(["func","prop"].indexOf(n)===-1)throw`multiinject attribute cannot be applied on ${n} members.`;if(["_constructor","_dispose"].indexOf(t)!==-1)throw`multiinject attribute cannot be applied on special function.`;let i=this.args[0],s=this.args[1],o=null,u=null;if(Array.isArray(s)||(s=[s]),"string"!=typeof i)throw`multiinject attribute does not support direct type injections.`;switch(i=a(i),o=l.Container.resolve(i,!0,...s),n){case"func":u=r.value,r.value=function(...e){u(o,...e)}.bind(e);break;case"prop":e[t]=o}})}));let x=[],O=e=>{return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},A=e=>{return new RegExp("^"+e.split(/\*+/).map(O).join(".*")+"$")};if(l.Aspects={},l.Aspects.raw=(()=>{return x}),l.Aspects.register=((e,n)=>{let t=e||"~",r="",i="",s="",o="~",u="";if(t.indexOf("/")!==-1){let e=t.split("/");t=e[0].trim(),o=e[1].trim()}if("~"===t)r="~",i="~",s="~";else if(""===t)r="^",i="~",s="~";else if(t.indexOf(".")===-1)if(r="^",t.indexOf(":")===-1)i=t,s="~";else{let e=t.split(":");i=e[0].trim(),s=e[1].trim()}else if(r=t.substr(0,t.lastIndexOf(".")),t=t.substr(t.lastIndexOf(".")+1),t.indexOf(":")===-1)i=t,s="~";else{let e=t.split(":");i=e[0].trim(),s=e[1].trim()}"*"!==r&&""!==r||(r="~"),"*"!==i&&""!==i||(i="~"),"*"!==s&&""!==s||(s="~"),"*"!==o&&""!==o||(o="~"),u=`${r}=${i}=${s}=${o}`,x[u]=x[u]||[],x[u].push(n)}),l.Aspects.get=((e,n,t)=>{let r=[],i="",s="",o=n.trim();e.indexOf(".")!==-1?(i=e.substr(0,e.lastIndexOf(".")).trim(),s=e.substr(e.lastIndexOf(".")+1).trim()):(i="^",s=e.trim());for(let u in x){let e=u.split("="),n=e[0],c=A(n),f=e[1],a=A(f),l=e[2],p=A(l),d=e[3],m=A(d),y="~"===d;if((i===n||c.test(i))&&(s===f||a.test(s))&&(o===l||p.test(o))){if(!y)for(let e of t)if(e.name===d||m.test(e.name)){y=!0;break}if(y)for(let n of x[u])r.indexOf(n)===-1&&r.push(n)}}return r}),l.Aspect=l.Class("Aspect",function(e){let n=null,t=null,r=null;e("abstract"),this.construct((...e)=>{this.args=e}),this.prop("args",[]),this.func("before",e=>{return"function"==typeof e&&(n=e),n}),this.func("after",e=>{return"function"==typeof e&&(t=e),t}),this.func("around",e=>{return"function"==typeof e&&(r=e),r})}),l.Serializer={},l.Serializer.serialize=(e=>{return"instance"===e._.type?e._.serialize():null}),l.Serializer.deserialize=((e,n)=>{let t=new e;return"instance"===t._.type?(t._.deserialize(n),t):null}),l.Reflector=function(e){const n=function(e){this.getType=(()=>{return e._.type}),this.getName=(()=>{return e._.name||""}),this.getNamespace=(()=>{let n=e._.namespace;return n?new b(n):null}),this.getAssembly=(()=>{let n=l.Assembly.get(e._.name);return n?new _(n):null}),this.getTarget=(()=>{return e}),this.isInstance=(()=>{return"instance"===e._.type}),this.isClass=(()=>{return"class"===e._.type}),this.isEnum=(()=>{return"enum"===e._.type}),this.isProc=(()=>{return"proc"===e._.type}),this.isStructure=(()=>{return"structure"===e._.type}),this.isStructureInstance=(()=>{return"sinstance"===e._.type}),this.isNamespace=(()=>{return"namespace"===e._.type}),this.isResource=(()=>{return"resource"===e._.type}),this.isAssembly=(()=>{return"assembly"===e._.type}),this.isMixin=(()=>{return"mixin"===e._.type}),this.isInterface=(()=>{return"interface"===e._.type})},t=function(e,n,t){this.getType=(()=>{return"member"}),this.getMemberType=(()=>{return e}),this.getTarget=(()=>{return n}),this.getTargetType=(()=>{return n._.type}),this.getName=(()=>{return t})},r=function(e,n,t,r){this.getType=(()=>{return"attribute"}),this.getName=(()=>{return n}),this.getTarget=(()=>{return r}),this.getArgs=(()=>{return t.slice()}),this.getClass=(()=>{return e?new d(e):null})},i=function(e,n){this.getType=(()=>{return"aspect"}),this.getName=(()=>{return e._.name}),this.getTarget=(()=>{return n}),this.getClass=(()=>{return e?new d(e):null})},s=function(e,n,i,s){let o=new t(e,n,i);return o.getRef=(()=>{return s}),o.getAttributes=(()=>{let e=[],t=[];for(let s of n._.instanceOf)if(s.meta[i]){t=s.meta[i];for(let o of t)e.push(new r(o.Attr,o.name,o.args,n))}return e}),o.hasAttribute=(e=>{let t=!1,r=[];for(let s of n._.instanceOf){if(s.meta[i]){r=s.meta[i];for(let n of r)if(n.name==e){t=!0;break}}if(t)break}return t}),o.getAttribute=(e=>{let t=null;for(let s of n._.instanceOf){if(s.meta[i]){let o=s.meta[i];for(let u of o)if(u.name===e){t=new r(u.Attr,u.name,u.args,n);break}}if(null!==t)break}return t}),o.isEnumerable=(()=>{return!!n[i]&&Object.getOwnPropertyDescriptor(n,i).enumerable}),o.isDeprecated=(()=>{return n._._.hasAttrEx("deprecate",i)}),o.isConditional=(()=>{return n._._.hasAttrEx("conditional",i)}),o.isOverridden=(()=>{return n._._.hasAttrEx("override",i)}),o.isOwn=(()=>{return n._.isOwnMember(i)}),o.isDerived=(()=>{return n._._.isDerivedMember(i)}),o.isPrivate=(()=>{return n._._.hasAttrEx("private",i)}),o.isProtected=(()=>{return n._._.isProtectedMember(i)}),o.isPublic=(()=>{return!o.isPrivate&&!o.isProtected}),o.isSealed=(()=>{return n._._.isSealedMember(i)}),o.isMixed=(()=>{return n._._.hasAttrEx("mixed",i)}),o.getMixin=(()=>{if(o.isMixed()){let e=o.getAttribute("mixed").getArgs()[0];return new w(e)}return null}),o.isInterfaceEnforced=(()=>{return o.getInterfaces().length>0}),o.getInterfaces=(()=>{let e=[],t=[];for(let r of n._.instanceOf)if(r.meta[i]){t=r.meta[i].interfaces;for(let s of t)e.push(new v(s,n))}return e}),o.isProp=(()=>{return"prop"===e}),o.isFunc=(()=>{return"func"===e}),o.isEvent=(()=>{return"event"===e;
}),o},o=function(e,n,t){let r=new s("prop",e,n,t);return r.getValue=(()=>{return e[n]}),r.setValue=(t=>{return e[n]=t}),r.getRaw=(()=>{return t}),r.isReadOnly=(()=>{return e._._.hasAttrEx("readonly",n)}),r.isSetOnce=(()=>{return e._._.hasAttrEx("readonly",n)&&e._._.hasAttrEx("once",n)}),r.isStatic=(()=>{return e._._.hasAttrEx("static",n)}),r.isSerializable=(()=>{return e._._.isSerializableMember(n)}),r},u=function(e,n,t,r){let o=new s("func",e,n,t);return o.invoke=((...t)=>{return e[n](...t)}),o.getAspects=(()=>{let t=[],r=[];for(let s of e._.instanceOf)if(s.meta[n]){r=s.meta[n].aspects;for(let o of r)t.push(new i(o,e))}return t}),o.getRaw=(()=>{return r}),o.isASync=(()=>{return e._._.hasAttrEx("async",n)}),o.isConstructor=(()=>{return"_constructor"===n}),o.isDisposer=(()=>{return"_dispose"===n}),o},c=function(e,n,t){let r=new s("event",e,n,t);return r.raise=((...e)=>{return t(...e)}),r.isSubscribed=(()=>{return t.subscribe.all().length>0}),r},f=function(e,n){let r=new t("key",e,n);return r.getValue=(()=>{return e[n]}),r},a=function(e){let t=new n(e),r=(e,n,t)=>{if(""===n&&0===t.length)return e.slice();let r=[],i=!0;for(let s of e)if("member"===s.getType()&&(""===n||s.getMemberType()===n)){if(i=!0,0!==t.length)for(let e of t)if(!s.hasAttribute(e)){i=!1;break}i&&r.push(s)}return r},i=n=>{let t=[],i=[],s=null,f=null;for(let a of e._.instanceOf){for(let r in a.meta){if(a.meta.hasOwnProperty(r)){switch(i=a.meta[r],a.meta[r].type){case"func":s=new u(e,r,a.meta[r].ref,a.meta[r].raw),t.push(s);break;case"prop":s=new o(e,r,a.meta[r].ref),t.push(s);break;case"event":s=new c(e,r,a.meta[r].argNames,a.meta[r].ref),t.push(s);break;default:throw"Unknown member type"}"undefined"!=typeof n&&r===n&&(t=[],f=s)}if(null!==f)break}if(null!==f)break}return null!==f?f:{all:(...e)=>{return r(t,"",e)},func:(...e)=>{return r(t,"func",e)},prop:(...e)=>{return r(t,"prop",e)},event:(...e)=>{return r(t,"event",e)}}};return t.getClass=(()=>{return null!==e._.inherits?new d(e._.inherits):null}),t.getFamily=(()=>{let n=[],t=e._.inherits;while(!0){if(null===t)break;n.push(new d(t)),t=t._.inherits}return n}),t.getMixins=(()=>{let e=[],n=t.getFamily();for(let r of n)e=e.concat(r.getMixins());return e}),t.getInterfaces=(()=>{let e=[],n=t.getFamily();for(let r of n)e=e.concat(r.getInterfaces());return e}),t.getMembers=((...e)=>{let n=i();return 0!==e.length?n.all(...e):n}),t.getMember=(e=>{return i(e)}),t.isSingleton=(()=>{return t.getClass().isSingleton()}),t.isInstanceOf=(n=>{return e._.isInstanceOf(n)}),t.isMixed=(n=>{return e._.isMixed(n)}),t.isImplements=(n=>{return e._.isImplements(n)}),t},p=function(e){let t=new n(e);return t.getStructure=(()=>{return null!==e._.inherits?new h(e._.inherits):null}),t.getMembers=(()=>{let n=Object.keys(e),t=n.indexOf("_");return t!==-1&&n.splice(t,1),n}),t.getMember=(n=>{return e[n]}),t.invoke=((...n)=>{return e[I](...n)}),t.isInstanceOf=(n=>{return e._.inherits._.name===n}),t},d=function(e){let t=new n(e);return t.getParent=(()=>{return null!==e._.inherits?new d(e._.inherits):null}),t.getFamily=(()=>{let n=[],t=e._.inherits;while(!0){if(null===t)break;n.push(new d(t)),t=t._.inherits}return n}),t.getMixins=(()=>{let n=[];for(let t of e._.mixins)n.push(new w(t));return n}),t.getInterfaces=(()=>{let n=[];for(let t of e._.interfaces)n.push(new v(t));return n}),t.isSingleton=(()=>{return e._.isSingleton()}),t.isSingleInstanceCreated=(()=>{return null!==e._.singleInstance()}),t.isSealed=(()=>{return e._.isSealed()}),t.isDerivedFrom=(n=>{return e._.isDerivedFrom(n)}),t.isMixed=(n=>{return e._.isMixed(n)}),t.isImplements=(n=>{return e._.isImplements(n)}),t},m=function(e){let t=new n(e);return t.getMembers=(()=>{let n=e._.keys(),t=[];for(let r of n)t.push(new f(e,r));return t}),t.getMember=(n=>{if("undefined"==typeof e[n])throw`${n} is not defined.`;return new f(e,n)}),t.getKeys=(()=>{return e._.keys()}),t.getValues=(()=>{return e._.values()}),t},y=function(e){let t=new n(e);return t.isASync=(()=>{e.isASync()}),t.invoke=((...n)=>{return e._.invoke(...n)}),t},g=function(e){let t=new n(e);return t.getFile=(()=>{return e.file()}),t.getResType=(()=>{return e.type()}),t.getContent=(()=>{return e.get()}),t},h=function(e){let t=new n(e);return t},b=function(e){let t=new n(e);return t.getMembers=(()=>{let n=e.getTypes(),t=[];if(n)for(let r of n)switch(r._.type){case"class":t.push(new d(r));break;case"enum":t.push(new m(r));break;case"structure":t.push(new h(r));break;case"mixin":t.push(new w(r));break;case"interface":t.push(new v(r))}return t}),t.getMember=(n=>{let t=e.getType(n),r=null;if(t)switch(t._.type){case"class":r=new d(t);break;case"enum":r=new m(t);break;case"structure":r=new h(t);break;case"mixin":r=new w(t);break;case"interface":r=new v(t)}return r}),t.createInstance=((n,...t)=>{return e.createInstance(n,...t)}),t},_=function(e){let t=new n(e);return t.getTypes=(()=>{return e.types}),t.getAssets=(()=>{return e.assets}),t.getADO=(()=>{return e._.ado}),t.load=(()=>{return e.load()}),t},w=function(e){let t=new n(e);return t},v=function(e){let r=new n(e),i=()=>{let n=[];for(let r in e)e.hasOwnProperty(r)&&"_"!==r&&n.push(new t(e[r].type,e,r));return n};return r.getMembers=(()=>{return i()}),r.getMember=(n=>{if("undefined"==typeof e[n])throw`${n} is not defined.`;return new t(e[n].type,e,n)}),r};let x=null;switch(e._.type){case"instance":x=new a(e);break;case"sinstance":x=new p(e);break;case"class":x=new d(e);break;case"enum":x=new m(e);break;case"proc":x=new y(e);break;case"resource":x=new g(e);break;case"structure":x=new h(e);break;case"namespace":x=new b(e);break;case"assembly":x=new _(e);break;case"mixin":x=new w(e);break;case"interface":x=new v(e);break;default:throw`Unknown type ${e._.type}.`}return x},l.members.push("Reflector"),!h.env.supressGlobals)for(let I of l.members)t[I]=Object.freeze(l[I]);return l.members=Object.freeze(l.members),t.flair=Object.freeze(l),t.flair});
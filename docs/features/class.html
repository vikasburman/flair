<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">        
        <title>OOJS - Object Oriented JavaScript</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    </head>
    <body>
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="https://github.com/vikasburman/oojs">OOJS</a>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li><a href="../index.html">Overview</a></li>
                    </ul>
                    <ul class="nav navbar-nav">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">OOP <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li class="active"><a href="./class.html">Class</a></li>
                                <li><a href="./structure.html">Structure</a></li>
                                <li><a href="./interface.html">Interface</a></li>
                                <li><a href="./mixin.html">Mixin</a></li>
                                <li><a href="./enum.html">Enum</a></li>
                                <li><a href="./assembly.html">Assembly</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="./using.html">using</a></li>
                                <li><a href="./as.html">as</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">AOP <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="./aspect.html">Aspect</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="./aspects.html">Registry</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Attributes <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="./attribute.html">Attribute</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="./attributes.html">Readymade Attributes</a></li>
                                <li><a href="./customattributes.html">Custom Attributes</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">DI <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="./container.html">Container</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="./inject.html">Injection</a></li>
                            </ul>
                        </li>
                        <li><a href="./serializer.html">Serializer</a></li>
                        <li><a href="./reflector.html">Reflector</a></li>
                    </ul>
                </div>
            </div>
        </nav>        

<div class="container-fluid">
<div class="page-header">
<h2>Classes</h2>
Open browser console and play with controls here to see it in action.
</div>

<div class="row-fluid">
<pre><code class="JavaScript">
<div class="col-md-6">
// define class
let Vehicle = Class('Vehicle', function() {
    // constructor
    this.func('constructor', (name, cc) => {
       this.name = name || 'Suzuki';
       this.cc = cc || 800; 
    });

    // properties
    this.prop('name');
    this.prop('cc');

    // functions
    this.func('start', () => {
        console.log('started: ' + this.name);
    });
});
</div>
<div class="col-md-6">
<input id="vname" type="text" class="form-control" placeholder="name" value="">
<input id="vcc" type="text" class="form-control" placeholder="cc" value="">
<button type="button" class="btn btn-primary" onclick="code.createVehicle1();">let vehicle = new Vehicle();</button>&nbsp;<button type="button" class="btn btn-primary" onclick="code.createVehicle2();">let vehicle = new Vehicle(name, cc);</button><br>
<button type="button" class="btn btn-info" onclick="code.showVehicleName();">vehicle.name;</button>&nbsp;<button type="button" class="btn btn-info" onclick="code.showVehicleCC();">vehicle.cc;</button><br>
<button type="button" class="btn btn-success" onclick="code.startVehicle();">vehicle.start();</button>
</div>
</code></pre>
</div>

<div class="row-fluid">
<pre><code class="JavaScript">
<div class="col-md-6">
// inherit from Vehicle
let Car = Class('Car', Vehicle, function() {
    this.prop('type', 'car');
});
</div>
<div class="col-md-6">
<button type="button" class="btn btn-primary" onclick="code.createCar1();">let car = new Car();</button>&nbsp;<button type="button" class="btn btn-primary" onclick="code.createCar2();">let car = new Car(name, cc);</button><br>
<button type="button" class="btn btn-info" onclick="code.showCarName();">car.name;</button>&nbsp;<button type="button" class="btn btn-info" onclick="code.showCarCC();">car.cc;</button>&nbsp;<button type="button" class="btn btn-info" onclick="code.showCarType();">car.type;</button><br>
<button type="button" class="btn btn-success" onclick="code.startCar();">car.start();</button>
</div>
</code></pre>
</div>    

<div class="row-fluid">
<pre><code class="JavaScript">
<div class="col-md-6">
// event handling
let BMW = Class('BMW', Vehicle, function() {
    // define event
    this.event('turnedOff');

    this.func('turnOff', () => {
        console.log('turning off: ' + this.name);
        
        // raise event with parameter
        this.turnedOff(this.name);
    });
});

let BMWFactory = Class('BMWFactory', function() {
    this.func('constructor', (bmw) => {
        // add subscriber to the event
        bmw.turnedOff.subscribe(this.onTurnOff);
    });

    // event handler 
    this.func('onTurnOff', (e) => {
        console.log(e.args[0] + ' turned off!');
    });
});
</div>
<div class="col-md-6">
<button type="button" class="btn btn-primary" onclick="code.createBMWFactory();">let bmw = new BMW(); let bmwFactory = new BMWFactory(bmw);</button><br>
<button type="button" class="btn btn-success" onclick="code.stopBMW();">bmw.turnOff();</button>
</div>
</code></pre>
</div>  
</div>     

        <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script src="../js/jquery-3.2.1.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        <script src="../../src/oojs.js"></script>
        <script>
            $(document).ready(() => {
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });
            
                oojs({ symbols: ['DEBUG'] });
        
                let Vehicle = Class('Vehicle', function() {
                    this.func('constructor', (name, cc) => {
                        this.name = name || 'Suzuki';
                        this.cc = cc || 800; 
                    });

                    this.prop('name');
                    this.prop('cc', -1);

                    this.func('start', () => {
                        console.log('started: ' + this.name);
                    });
                });
                let Car = Class('Car', Vehicle, function() {
                    this.prop('type', 'car');
                });
                let BMW = Class('BMW', Vehicle, function() {
                    // define event
                    this.event('turnedOff');

                    this.func('turnOff', () => {
                        console.log('turning off: ' + this.name);
                        
                        // raise event with parameter
                        this.turnedOff(this.name);
                    });
                });

                let BMWFactory = Class('BMWFactory', function() {
                    this.func('constructor', (bmw) => {
                        // add subscriber to the event
                        bmw.turnedOff.subscribe(this.onTurnOff);
                    });

                    // event handler 
                    this.func('onTurnOff', (e) => {
                        console.log(e);
                        console.log(e.args[0] + ' turned off!');
                    });
                });                           

                let code = {};
                code.vehicle = null;
                code.car = null;
                code.bmw = null;
                code.bmwFactory = null;
                code.createVehicle1 = function() {
                    code.vehicle = new Vehicle();
                    console.log(code.vehicle);
                };
                code.createVehicle2 = function() {
                    code.vehicle = new Vehicle($('#vname')[0].value, $('#vcc')[0].value);
                    console.log(code.vehicle);
                };
                code.showVehicleName = function() {
                    console.log(code.vehicle.name);
                };
                code.showVehicleCC = function() {
                    console.log(code.vehicle.cc);
                };
                code.startVehicle = function() {
                    code.vehicle.start();
                };
                
                code.createCar1 = function() {
                    code.car = new Car();
                    console.log(code.car);
                };
                code.createCar2 = function() {
                    code.car = new Car($('#vname')[0].value, $('#vcc')[0].value);
                    console.log(code.car);
                };                
                code.showCarName = function() {
                    console.log(code.car.name);
                };
                code.showCarCC = function() {
                    console.log(code.car.cc);
                };
                code.showCarType = function() {
                    console.log(code.car.type);
                };
                code.startCar = function() {
                    code.car.start();
                };

                code.createBMWFactory = function() {
                    code.bmw = new BMW();
                    code.bmwFactory = new BMWFactory(code.bmw);
                    console.log(code.bmw);
                    console.log(code.bmwFactory);
                };
                code.stopBMW = function() {
                    code.bmw.turnOff();
                };                

                window.code = code;
            });                
        </script>
    </body>
</html>